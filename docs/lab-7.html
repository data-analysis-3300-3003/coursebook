<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>coursebook - 18&nbsp; Introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./lab-6-practice-exercises.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">coursebook</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./unit-overview.html" class="sidebar-item-text sidebar-link">Unit overview</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./software.html" class="sidebar-item-text sidebar-link">Software</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./readings.html" class="sidebar-item-text sidebar-link">Reading</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mounting_google_drive_in_colab.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Google Drive in Colab</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-1-practice-exercises.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 1 (practice)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 2</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-2-self-guided.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 2 (self-guided)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-2-practice-exercises.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 2 (practice)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-3.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 3</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-3-self-guided.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 3 (self-guided)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-3-practice-exercises.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 3 (practice)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-4.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 4</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-4-self-guided.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 4 (self-guided)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-4-practice-exercises.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 4 (practice)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-5.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 5</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-5-self-guided.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 5 (self-guided)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-6.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 6</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-6-self-guided.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 6 (self-guided)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-6-practice-exercises.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Week 6 (practice)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab-7.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Week 7</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#web-mapping" id="toc-web-mapping" class="nav-link active" data-scroll-target="#web-mapping">Web mapping</a></li>
  <li><a href="#web-maps" id="toc-web-maps" class="nav-link" data-scroll-target="#web-maps">Web maps</a>
  <ul class="collapse">
  <li><a href="#task" id="toc-task" class="nav-link" data-scroll-target="#task">Task</a></li>
  </ul></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a>
  <ul class="collapse">
  <li><a href="#run-the-labs" id="toc-run-the-labs" class="nav-link" data-scroll-target="#run-the-labs">Run the labs</a></li>
  <li><a href="#working-in-colab" id="toc-working-in-colab" class="nav-link" data-scroll-target="#working-in-colab">Working in Colab</a></li>
  <li><a href="#import-modules" id="toc-import-modules" class="nav-link" data-scroll-target="#import-modules">Import modules</a></li>
  </ul></li>
  <li><a href="#web-map-services-wms" id="toc-web-map-services-wms" class="nav-link" data-scroll-target="#web-map-services-wms">Web Map Services (WMS)</a></li>
  <li><a href="#wms-getmap-operation" id="toc-wms-getmap-operation" class="nav-link" data-scroll-target="#wms-getmap-operation">WMS <code>GetMap</code> operation</a></li>
  <li><a href="#ipyleaflet" id="toc-ipyleaflet" class="nav-link" data-scroll-target="#ipyleaflet">ipyleaflet</a></li>
  <li><a href="#wms-getcapabilities-operation" id="toc-wms-getcapabilities-operation" class="nav-link" data-scroll-target="#wms-getcapabilities-operation">WMS <code>GetCapabilities</code> operation</a></li>
  <li><a href="#custom-wmslayer-objects" id="toc-custom-wmslayer-objects" class="nav-link" data-scroll-target="#custom-wmslayer-objects">Custom <code>WMSLayer()</code> objects</a>
  <ul class="collapse">
  <li><a href="#split-map-controls" id="toc-split-map-controls" class="nav-link" data-scroll-target="#split-map-controls">Split map controls</a></li>
  <li><a href="#data-wa-data-catalogue" id="toc-data-wa-data-catalogue" class="nav-link" data-scroll-target="#data-wa-data-catalogue">Data WA data catalogue</a></li>
  </ul></li>
  <li><a href="#xyz-tiles-and-slippy-maps" id="toc-xyz-tiles-and-slippy-maps" class="nav-link" data-scroll-target="#xyz-tiles-and-slippy-maps">XYZ Tiles and slippy maps</a>
  <ul class="collapse">
  <li><a href="#creating-your-own-xyz-tiles" id="toc-creating-your-own-xyz-tiles" class="nav-link" data-scroll-target="#creating-your-own-xyz-tiles">Creating your own XYZ tiles</a></li>
  <li><a href="#xyz-tiles-and-stac-collections" id="toc-xyz-tiles-and-stac-collections" class="nav-link" data-scroll-target="#xyz-tiles-and-stac-collections">XYZ tiles and STAC Collections</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-title">Introduction</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="web-mapping" class="level2">
<h2 class="anchored" data-anchor-id="web-mapping">Web mapping</h2>
<p>Static maps are rendered images with detail and styling to highlight a specific location, feature, or phenomenon. However, they are limited. A static map of a wide-area will omit local detail, and a static map of a small area will omit wide-area context. They are not interactive.</p>
<p>To addresss these limitations, and using web technologies such as making HTTP requests, web maps are interactive maps that update the information shown in response to user input (zooming in and out, panning).</p>
<p>To generate a web map your web browser, or another client application such as an app on a mobile device, makes a HTTP request to a server to GET a web map. The client’s HTTP request will include some parameters that describe the map it wishes to receive such as the location and zoom level. In response, the server will either generate the map dynamically (i.e.&nbsp;query a spatial database and render an image) or retrieve a pre-generated map image and respond by sending the map image to the client. Often, this image is in JPEG or PNG format. The client will then render the map in the client application that made the call to the web map server.</p>
<p>As you interact with the web map on your display (e.g.&nbsp;with your mouse zooming in and panning), the client will send new requests to the server which will respond by sending updated image data. This is what makes web mapping interactice.</p>
</section>
<section id="web-maps" class="level2">
<h2 class="anchored" data-anchor-id="web-maps">Web maps</h2>
<p><a href="https://www.e-education.psu.edu/geog585/node/685" target="_blank">Quin (2020)</a> describe a web map as comprising three components or layers:</p>
<ul>
<li>basemap: underlying spatial layers designed to provide geographic context. These are often pre-rendered map tiles that fuse together several spatial layers (e.g.&nbsp;roads, water bodies, buildings) that are not the main focus of the map.</li>
<li>thematic elements: geographic features that are the main focus of the map and are rendered on top of the basemap layers. Often, these elements are styled to emphasise patterns in the data or distinguish these elements from the basemap. These could be layers that you can toggle on and off.</li>
<li>interactive elements: there can be interactive elements rendered on a web map that provide extra information in response to user input (e.g.&nbsp;hover or popup text windows).</li>
</ul>
<p>We can also think of there being three types of web maps:</p>
<ul>
<li>dynamic: dynamic web map images are rendered on demand following a client request by a map server. Depending on how the server is configured, it can generate bespoke web maps for a particular client from spatial data.</li>
<li>tiled: tiled web map images are pre-generated and stored in cloud storage or in a database and a server retrieves the appropriate image tiles to fill the client’s web map, as indicated by parameters in the client request, and sends them to the client.</li>
<li>client-generated: coordinates representing a geometry (e.g.&nbsp;a GeoJSON object) are sent to the client and a client application, such as a web browser, renders the geometry on a web map.</li>
</ul>
<p>In reality, we often mix these three different types of web maps to produce a final composite web map. For example, dynamic map servers can generate tiles creating the “illusion” of a tiled map output. Or, we might use a pre-generated tiled basemap to provide geographic context and then use a dynamic web map to render “real-time” information in a spatial layer on top of it. An example of this is visualising traffic information with traffic-light shades on top of Google Maps pre-generated basemap tiles.</p>
<section id="task" class="level3">
<h3 class="anchored" data-anchor-id="task">Task</h3>
<p>The focus of this lab is to provide an introduction to web mapping technologies, highlight their strengths and limitations for particular contexts, and provide some recipes for how you can request web map data using Python. First, we will demonstrate how to request web map layers from servers that implement the Web Map Services (WMS) specification (dynamic web maps); a range of data providers make their data accessible as WMS services (e.g.&nbsp;Digital Earth Australia and public datasets in Western Australia via the Data WA Data Catalogue). Second, we will explore the structure of pre-generated tiled web maps based on XYZ map tiles or “slippy” maps which are often used for generating basemap images (e.g.&nbsp;in OpenStreetMap or Google Maps). Finally, we will demonstrate how you can dynamically generate basemaps from high-resolution remote sensing data stored in cloud-optimised GeoTIFF (COG) files.</p>
</section>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<section id="run-the-labs" class="level3">
<h3 class="anchored" data-anchor-id="run-the-labs">Run the labs</h3>
<p>You can run the labs locally on your machine or you can use cloud environments provided by Google Colab. <strong>If you’re working with Google Colab be aware that your sessions are temporary and you’ll need to take care to save, backup, and download your work.</strong></p>
<p><a href="https://colab.research.google.com/github/data-analysis-3300-3003/colab/blob/main/lab-7.ipynb" target="_blank"> <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"> </a></p>
</section>
<section id="working-in-colab" class="level3">
<h3 class="anchored" data-anchor-id="working-in-colab">Working in Colab</h3>
<p>If you’re working in Google Colab, you’ll need to install the required packages that don’t come with the colab environment.</p>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'google.colab'</span> <span class="kw">in</span> <span class="bu">str</span>(get_ipython()):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">!</span>pip install geopandas</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">!</span>pip install pyarrow</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">!</span>pip install mapclassify</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">!</span>pip install rasterio</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">!</span>pip install planetary<span class="op">-</span>computer</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">!</span>pip install pystac<span class="op">-</span>client</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">!</span>pip install ipyleaflet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="import-modules" class="level3">
<h3 class="anchored" data-anchor-id="import-modules">Import modules</h3>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.io <span class="im">as</span> pio</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> skimage <span class="im">import</span> io</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pystac_client</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> planetary_computer <span class="im">as</span> pc</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pystac.extensions.eo <span class="im">import</span> EOExtension <span class="im">as</span> eo</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> ipyleaflet <span class="im">import</span> Map, TileLayer, WMSLayer, basemaps, LegendControl, SplitMapControl</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> traitlets <span class="im">import</span> Unicode</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># setup renderer</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'google.colab'</span> <span class="kw">in</span> <span class="bu">str</span>(get_ipython()):</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    pio.renderers.default <span class="op">=</span> <span class="st">"colab"</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    pio.renderers.default <span class="op">=</span> <span class="st">"jupyterlab"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install OWSLib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: OWSLib in /opt/conda/lib/python3.10/site-packages (0.29.0)
Requirement already satisfied: requests&gt;=1.0 in /opt/conda/lib/python3.10/site-packages (from OWSLib) (2.28.1)
Requirement already satisfied: lxml in /opt/conda/lib/python3.10/site-packages (from OWSLib) (4.9.2)
Requirement already satisfied: python-dateutil&gt;=1.5 in /opt/conda/lib/python3.10/site-packages (from OWSLib) (2.8.2)
Requirement already satisfied: pyyaml in /opt/conda/lib/python3.10/site-packages (from OWSLib) (6.0)
Requirement already satisfied: pytz in /opt/conda/lib/python3.10/site-packages (from OWSLib) (2022.7)
Requirement already satisfied: six&gt;=1.5 in /opt/conda/lib/python3.10/site-packages (from python-dateutil&gt;=1.5-&gt;OWSLib) (1.16.0)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /opt/conda/lib/python3.10/site-packages (from requests&gt;=1.0-&gt;OWSLib) (1.26.13)
Requirement already satisfied: charset-normalizer&lt;3,&gt;=2 in /opt/conda/lib/python3.10/site-packages (from requests&gt;=1.0-&gt;OWSLib) (2.1.1)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /opt/conda/lib/python3.10/site-packages (from requests&gt;=1.0-&gt;OWSLib) (3.4)
Requirement already satisfied: certifi&gt;=2017.4.17 in /opt/conda/lib/python3.10/site-packages (from requests&gt;=1.0-&gt;OWSLib) (2022.12.7)</code></pre>
</div>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> owslib.wms <span class="im">import</span> WebMapService</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="web-map-services-wms" class="level2">
<h2 class="anchored" data-anchor-id="web-map-services-wms">Web Map Services (WMS)</h2>
<p>Servers implmenting the Web Map Services (WMS) specification support dynamically drawn web maps. It is an Open Geospatial Consortium (OGC) specification that server-side applications implement to describe the requests they can receive to generate web map images on-demand for clients.</p>
<p>The client request to a WMS server indicates the location, extent, coordinate reference system, and potentially a range of other parameters that determine how the web map is generated and styled from spatial data (e.g.&nbsp;a spatial database). The server responds by sending a rendered image of the spatial data as a JPEG or PNG file.</p>
<p>As you move around and zoom in and out of your web map widget (e.g.&nbsp;in your browser), new requests are sent to the WMS server and it responds by generating new images and sending them back to the client to construct the web map in the user interface.</p>
<section id="recap-quiz" class="level4">
<h4 class="anchored" data-anchor-id="recap-quiz">Recap quiz</h4>
<details>
<summary>
<b>Can you think of a disadvantage of dynamically generating web map images from spatial data in response to client requests?</b>
</summary>
If you move around quickly in your web map widget, you might generate lots of requests for the WMS server to handle (query a spatial database for relevant data, render spatial data into an image, and send the image back to the client). The server might not be able to keep up with the speed at which you are moving around in the web map widget and you will experience a lag. A lag could also be generated if a WMS server is handling requests from many different clients.
</details>
<p>
</p>
<p>A client makes a request to a server implementing the WMS specification by sending a HTTP message to URL of the server. The client includes information for server to use when handling the request as query parameters appended to the URL. The WMS specification has a <code>REQUEST</code> parameter; when this is set to the value <code>GetMap</code> it will request the server to generate a web map image. Setting the <code>REQUEST</code> value to <code>GetCapabilities</code> will return a metadata about the WMS server. Values set for the <code>REQUEST</code> parameter indicate the WMS operation the server should undertake - you can see the list of operations <a href="https://docs.geoserver.org/latest/en/user/services/wms/reference.html#operations" target="_blank">here</a>.</p>
</section>
</section>
<section id="wms-getmap-operation" class="level2">
<h2 class="anchored" data-anchor-id="wms-getmap-operation">WMS <code>GetMap</code> operation</h2>
<p>When requesting a <code>GetMap</code> operation from a WMS server, a client can specify some of the following query parameters:</p>
<ul>
<li><code>layers</code> - layers to display on the map</li>
<li><code>srs</code> or <code>crs</code> - coordinate reference system of the map output</li>
<li><code>styles</code> - styles that define how layers are rendered</li>
<li><code>bbox</code> - bounding box for map extent in units of <code>srs</code></li>
</ul>
<p>A full description of query parameters for a <code>GetMap</code> operation can be found in the <a href="https://docs.geoserver.org/2.22.x/en/user/services/wms/reference.html#getmap" target="_blank">GeoServer docs</a>.</p>
<p>Let’s demonstrate this by making a single request to a WMS server hosted by Digital Earth Australia to retrieve a web map image of the DEA Land Cover Calendar Year (Landsat) dataset.</p>
<p>This is an example request URL made by a web map client for land cover data for a region close to Perth (this URL was extracted from the <a href="https://maps.dea.ga.gov.au/" target="_blank">Digital Earth Australia Map</a>):</p>
<p><em>https://ows.dea.ga.gov.au/?transparent=true&amp;format=image/png&amp;exceptions=XML&amp;styles=level4&amp;version=1.3.0&amp;time=2020-01-01&amp;service=WMS&amp;request=GetMap&amp;layers=ga_ls_landcover&amp;bbox=12885448.480201874,-3786384.6331344917,12895232.419822376,-3776600.6935139894&amp;width=256&amp;height=256&amp;crs=EPSG:3857</em></p>
<p>You can see the URL for the WMS server <code>https://ows.dea.ga.gov.au/</code> and then several query parameters that define the <code>GetMap</code> request. The query parameters are appended after the domain name for the server as indicated by the <code>?</code> symbol. Query parameters have a <code>parameter=value</code> format and are separated by the <code>&amp;</code> symbol. You can find more information about query parameters <a href="https://requests.readthedocs.io/en/latest/user/quickstart/#passing-parameters-in-urls" target="_blank">here</a> and <a href="https://en.wikipedia.org/wiki/Query_string" target="_blank">here</a> (you can also refer back to lab-6 for a recap on query parameters).</p>
<p>You can see query parameters indicating the <code>format</code> for the returned image (<code>format=image/png</code>), that the service to generate the image is WMS (<code>service=WMS</code>), that the request operation is <code>GetMap</code> (<code>request=GetMap</code>), and that the layer to render is defined by <code>layers=ga_ls_landcover</code> (a web map server will often be able to access a range of spatial datasets from which it can generate an image). There are also other query parameters that define the location for the image, the size of the image, and coordinate reference system. All this information is used by the server to generate the image returned to the client.</p>
<p>A <code>requests</code> object’s <code>get()</code> method has a <code>params</code> argument that can take a Python dictionary object specifying key:value pairs to convert to query parameters and append to the URL for a HTTP GET message.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>payload <span class="op">=</span> {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"transparent"</span>: <span class="st">"true"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"format"</span>: <span class="st">"image/png"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"exceptions"</span>: <span class="st">"XML"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"styles"</span>: <span class="st">"level4"</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"version"</span>: <span class="st">"1.3.0"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"time"</span>: <span class="st">"2020-01-01"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"service"</span>: <span class="st">"WMS"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"request"</span>: <span class="st">"GetMap"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"layers"</span>: <span class="st">"ga_ls_landcover"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"bbox"</span>: <span class="st">"12885448.480201874,-3786384.6331344917,12895232.419822376,-3776600.6935139894"</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"width"</span>: <span class="dv">256</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"height"</span>: <span class="dv">256</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"crs"</span>: <span class="st">"EPSG:3857"</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(<span class="st">"https://ows.dea.ga.gov.au"</span>, params<span class="op">=</span>payload)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>r.status_code</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>200</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write the returned image data to a PNG file</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>os.makedirs(os.path.join(os.getcwd(), <span class="st">"week-7"</span>), exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(os.path.join(os.getcwd(), <span class="st">"week-7"</span>, <span class="st">"demo-dea-wms.png"</span>), <span class="st">"wb"</span>) <span class="im">as</span> dst:</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    dst.write(r.content)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># visualise returned image</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>img <span class="op">=</span> io.imread(os.path.join(os.getcwd(), <span class="st">"week-7"</span>, <span class="st">"demo-dea-wms.png"</span>))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>px.imshow(img, height<span class="op">=</span><span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab-7_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>To verify that we setup the <code>payload</code> object defining the query parameters to Digital Earth Australia’s WMS server correctly, we can skip using the <code>params</code> argument in the <code>get()</code> method and pass in the full URL string.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>r_fullstring <span class="op">=</span> requests.get(<span class="st">"https://ows.dea.ga.gov.au/?transparent=true&amp;format=image/png&amp;exceptions=XML&amp;styles=level4&amp;version=1.3.0&amp;time=2020-01-01&amp;service=WMS&amp;request=GetMap&amp;layers=ga_ls_landcover&amp;bbox=12885448.480201874,-3786384.6331344917,12895232.419822376,-3776600.6935139894&amp;width=256&amp;height=256&amp;crs=EPSG:3857"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(r_fullstring.status_code)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(os.path.join(os.getcwd(), <span class="st">"week-7"</span>, <span class="st">"demo-dea-wms-fullstring.png"</span>), <span class="st">"wb"</span>) <span class="im">as</span> dst:</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    dst.write(r.content)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># visualise returned image</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>img <span class="op">=</span> io.imread(os.path.join(os.getcwd(), <span class="st">"week-7"</span>, <span class="st">"demo-dea-wms-fullstring.png"</span>))</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>px.imshow(img, height<span class="op">=</span><span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>200</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="lab-7_files/figure-html/cell-8-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>The request we just made to the Digital Earth Australia WMS server to retrieve an image illustrates the process that a client web map application would go through to retrieve the data to fill the web map component of your display. As you move around the web map with your mouse (or touch and drag on a touchscreen) the client web map application generates these requests, sends them to the WMS server, and renders the returned image data.</p>
<p>The below video demonstrates using the Digital Earth Australia Map (https://maps.dea.ga.gov.au/) to render the DEA Land Cover Calendar Year (Landsat) data using WMS. You can see the client (here the Digital Earth Australia Map application in your web browser) making several of HTTP requests to the Digital Earth Australia WMS server to generate PNG images to create the map visualisation on the display.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>HTML</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>div style<span class="op">=</span><span class="st">"padding:50% 0 0 0;position:relative;"</span><span class="op">&gt;&lt;</span>iframe src<span class="op">=</span><span class="st">"https://player.vimeo.com/video/816397558?h=84992531b5&amp;amp;badge=0&amp;amp;autopause=0&amp;amp;player_id=0&amp;amp;app_id=58479"</span> frameborder<span class="op">=</span><span class="st">"0"</span> allow<span class="op">=</span><span class="st">"autoplay; fullscreen; picture-in-picture"</span> allowfullscreen style<span class="op">=</span><span class="st">"position:absolute;top:0;left:0;width:100%;height:100%;"</span> title<span class="op">=</span><span class="st">"dea-wms-landsat.mov"</span><span class="op">&gt;&lt;/</span>iframe<span class="op">&gt;&lt;/</span>div<span class="op">&gt;&lt;</span>script src<span class="op">=</span><span class="st">"https://player.vimeo.com/api/player.js"</span><span class="op">&gt;&lt;/</span>script<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div style="padding:50% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/816397558?h=84992531b5&amp;badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen="" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="dea-wms-landsat.mov"></iframe></div><script src="https://player.vimeo.com/api/player.js"></script>
</div>
</div>
</section>
<section id="ipyleaflet" class="level2">
<h2 class="anchored" data-anchor-id="ipyleaflet">ipyleaflet</h2>
<p>It is rare that we’ll need to manually generate URLs with query parameters to send to WMS servers; we’ll use client web map applications, such as the DEA Map, for these tasks. Here, we’ll work with <a href="https://ipyleaflet.readthedocs.io/en/latest/index.html" target="_blank">ipyleaflet</a>, which is based on the <a href="https://leafletjs.com/" target="_blank">Leaflet web mapping software</a>.</p>
<p>We can use ipyleaflet to create a <code>Map</code> widget obejct using the <code>Map()</code> constructor function. The <code>Map</code> object is an interactive widget in our display that we can add web map layers to using the <code>add_layer()</code> method or add controls to using the <code>add_controls()</code> method.</p>
<p>When we create a <code>Map</code> widget obejct we can select a <code>basemap</code>, <code>center</code> location, and <code>zoom</code> level.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(basemap<span class="op">=</span>basemaps.CartoDB.Positron, center<span class="op">=</span>(<span class="op">-</span><span class="dv">32</span>, <span class="dv">117</span>), zoom<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"b571957af419435e83db96b600eaa5e1","version_major":2,"version_minor":0}
</script>
</div>
</div>
<p>To visualise the DEA Land Cover Calendar Year (Landsat) data on an ipyleaflet web map we first need to create a <code>WMSLayer()</code> object (<a href="https://ipyleaflet.readthedocs.io/en/latest/layers/wms_layer.html#attributes" target="_blank"><code>WMSLayer()</code> docs here</a>).</p>
<p>To create a <code>WMSLayer()</code> object we need to pass in the <code>url</code> for the WMS server, specify the <code>layers</code> we want to render on the web map, and specify a format for the web map images and provide an attribution. Providing an attribution is often important as many WMS service licenses require an attribution for use.</p>
<p>We can use a <code>Map</code> object’s <code>add_layer()</code> method to add the WMS layer to the map.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dea_landsat_lc_wms <span class="op">=</span> WMSLayer(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://ows.dea.ga.gov.au"</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span><span class="st">"ga_ls_landcover"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"image/png"</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    transparent<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"DEA Land Cover Calendar Year (Landsat)"</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>m.add_layer(dea_landsat_lc_wms)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"b571957af419435e83db96b600eaa5e1","version_major":2,"version_minor":0}
</script>
</div>
</div>
<p>We can change the <code>style</code> used to render the web map image data. The DEA Land Cover Calendar Year (Landsat) has a basic style which we can request from the server - note how we set the <code>styles</code> argument to <code>"level3"</code> below. This is an example of how our client, here the ipyleaflet <code>Map</code> object, has dynamically requested the WMS server to generate images for the web map display using a different visual style.</p>
<p>We can also create a <code>LegendControl</code> object by passing a dictionary object of legend element names and colours to the <code>LegendControl()</code> constructor function. We can then add the <code>LegendControl</code> object to the <code>Map</code> object. <a href="https://ipyleaflet.readthedocs.io/en/latest/controls/index.html" target="_blank">Controls</a> are widgets that we can use to <em>control</em> how we interact with and interpret the map (e.g.&nbsp;zoom widgets, legends, split map, fullscreen etc).</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create WMS layer with level3 style for DEA Land Cover Calendar Year (Landsat)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>dea_landsat_basic_lc_wms <span class="op">=</span> WMSLayer(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://ows.dea.ga.gov.au"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span><span class="st">"ga_ls_landcover"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"image/png"</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    transparent<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    styles<span class="op">=</span><span class="st">"level3"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"DEA Land Cover Calendar Year (Landsat)"</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co"># create dict to define legend elements and colour</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>level_3_legend <span class="op">=</span> {</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Water"</span>: <span class="st">"#4d9fdc"</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Natural Bare Surface"</span>: <span class="st">"#f3ab69"</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Artificial Surface"</span>: <span class="st">"#da5c69"</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Natural Aquatic Vegetation"</span>: <span class="st">"#34bf79"</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Natural Terrestrial Vegetation"</span>: <span class="st">"#1f7912"</span>,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Cultivated Terrestrial Vegetation"</span>: <span class="st">"#acbc2e"</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co"># create LegendControl object</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>legend <span class="op">=</span> LegendControl(level_3_legend)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new map instance</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(basemap<span class="op">=</span>basemaps.CartoDB.Positron, center<span class="op">=</span>(<span class="op">-</span><span class="dv">32</span>, <span class="dv">117</span>), zoom<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co"># add WMS layer to map</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>m.add_layer(dea_landsat_basic_lc_wms)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co"># add legend to the map</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>m.add_control(legend)</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="co"># visualise the map</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"8283df74c0a74e56a7b6991c124b35d1","version_major":2,"version_minor":0}
</script>
</div>
</div>
</section>
<section id="wms-getcapabilities-operation" class="level2">
<h2 class="anchored" data-anchor-id="wms-getcapabilities-operation">WMS <code>GetCapabilities</code> operation</h2>
<p>The <a href="https://docs.geoserver.org/latest/en/user/services/wms/reference.html#getcapabilities" target="_blank">WMS <code>GetCapabilities</code> operation</a> returns metadata about a WMS server to a client. A <code>GetCapabilities</code> response is an XML document with three sections:</p>
<ul>
<li>service: metadata about the organisation providing the WMS server.</li>
<li>request: the request operations the server provides and the input parameters and response data formats for each operation.</li>
<li>layer: layers and coordinate systems the WMS server provides.</li>
</ul>
<p>We can use <code>GetCapabilities</code> requests to retrieve information from the WMS server necessary for generating WMS layers in our web maps. Let’s make a <code>GetCapabilities</code> request to the Digital Earth Australia WMS server.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>payload <span class="op">=</span> {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"service"</span>: <span class="st">"WMS"</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"version"</span>: <span class="st">"1.3.0"</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"request"</span>: <span class="st">"GetCapabilities"</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>r_dea_get_cap <span class="op">=</span> requests.get(<span class="st">"https://ows.dea.ga.gov.au"</span>, params<span class="op">=</span>payload)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>r_dea_get_cap.status_code</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>200</code></pre>
</div>
</div>
<p>This response object contains the Digital Earth Australia’s WMS server’s metadata in XML format. We can access it via the <code>text</code> property of the response object. However, it’s quite long so we’ll print the first 2000 characters so you can see the format.</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>r_dea_get_cap.text[<span class="dv">0</span>:<span class="dv">2000</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>'&lt;?xml version=\'1.0\' encoding="UTF-8"?&gt;\n\n\n\n&lt;WMS_Capabilities version="1.3.0"\nxmlns="http://www.opengis.net/wms"\nxmlns:xlink="http://www.w3.org/1999/xlink"\nxmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\nxmlns:dea="http://dea.ga.gov.au/namespaces/wms_extensions"\nxsi:schemaLocation="http://www.opengis.net/wms\nhttps://raw.githubusercontent.com/opendatacube/datacube-ows/master/wms_xsds/capabilities_extensions.xsd\nhttp://schemas.opengis.net/wms/1.3.0/capabilities_1_3_0.xsd"&gt;\n&lt;Service&gt;\n    &lt;Name&gt;WMS&lt;/Name&gt;\n    &lt;Title&gt;Digital Earth Australia - OGC Web Services&lt;/Title&gt;\n    \n    &lt;Abstract&gt;\n        Digital Earth Australia OGC Web Services\n    &lt;/Abstract&gt;\n    \n    \n    &lt;KeywordList&gt;\n        \n        &lt;Keyword&gt;NIDEM&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;bare-earth&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;geomedian&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;WOfS&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;mangrove&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;HLTC&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;landsat&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;fractional-cover&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;burn characteristics&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;time-series&lt;/Keyword&gt;\n        \n        &lt;Keyword&gt;australia&lt;/Keyword&gt;\n        \n    &lt;/KeywordList&gt;\n    \n\n    &lt;OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple"\n    xlink:href="dea.ga.gov.au//" /&gt;\n\n    \n    &lt;ContactInformation&gt;\n        \n        &lt;ContactPersonPrimary&gt;\n            &lt;ContactPerson&gt;Digital Earth Australia&lt;/ContactPerson&gt;\n            &lt;ContactOrganization&gt;Geoscience Australia&lt;/ContactOrganization&gt;\n        &lt;/ContactPersonPrimary&gt;\n        \n        \n        \n        &lt;ContactAddress&gt;\n            &lt;AddressType&gt;postal&lt;/AddressType&gt;\n            &lt;Address&gt;GPO Box 378&lt;/Address&gt;\n            &lt;City&gt;Canberra&lt;/City&gt;\n            &lt;StateOrProvince&gt;ACT&lt;/StateOrProvince&gt;\n            &lt;PostCode&gt;2609&lt;/PostCode&gt;\n            &lt;Country&gt;Australia&lt;/Country&gt;\n        &lt;/ContactAddress&gt;\n        \n        \n        &lt;ContactVoiceTelephone&gt;+61 2 6249 9111&lt;/ContactV'</code></pre>
</div>
</div>
<p>We can use the Python package OWSLib for easier querying and filtering of WMS server metadata. Passing in the URL for a WMS server to the OWSLib <code>WebMapService()</code> function creates a <code>WebMapService_1_3_0</code> object that we can use to query a WMS service.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dea_wms <span class="op">=</span> WebMapService(<span class="st">"https://ows.dea.ga.gov.au"</span>, version<span class="op">=</span><span class="st">"1.3.0"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>dea_wms.identification.title</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>'Digital Earth Australia - OGC Web Services'</code></pre>
</div>
</div>
<p>We can use the <code>WebMapService_1_3_0</code> object’s <code>contents</code> property to print a list of <code>layers</code> that the WMS service can generate web map images for.</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(dea_wms.contents)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>['s2_ls_combined',
 'ga_ls_ard_3',
 'ga_s2m_ard_3',
 'ga_ls8c_nbart_gm_cyear_3',
 'ga_ls7e_nbart_gm_cyear_3',
 'ga_ls5t_nbart_gm_cyear_3',
 'ga_ls8c_ard_3',
 'ga_ls7e_ard_3',
 'ga_ls5t_ard_3',
 'ga_s2am_ard_3',
 'ga_s2bm_ard_3',
 'ga_ls_landcover',
 'ga_ls_landcover_descriptors',
 'ga_ls_fc_3',
 'ga_ls_fc_pc_cyear_3',
 'ga_ls_mangrove_cover_cyear_3',
 's2_barest_earth',
 'ls8_barest_earth_mosaic',
 'landsat_barest_earth',
 'ga_ls_tcw_percentiles_2',
 'ga_ls_tc_pc_cyear_3',
 'ga_ls_wo_3',
 'ga_ls_wo_fq_myear_3',
 'ga_ls_wo_fq_cyear_3',
 'ga_ls_wo_fq_apr_oct_3',
 'ga_ls_wo_fq_nov_mar_3',
 'wofs_filtered_summary',
 'wofs_summary_clear',
 'wofs_summary_wet',
 'Water Observations from Space Statistics',
 'wofs_filtered_summary_confidence',
 'ITEM_V2.0.0',
 'ITEM_V2.0.0_Conf',
 'NIDEM',
 'high_tide_composite',
 'low_tide_composite',
 'ga_s2_ba_provisional_3',
 'alos_displacement',
 'alos_velocity',
 'envisat_displacement',
 'envisat_velocity',
 'radarsat2_displacement',
 'radarsat2_velocity',
 'aster_false_colour',
 'aster_regolith_ratios',
 'aster_aloh_group_composition',
 'aster_aloh_group_content',
 'aster_feoh_group_content',
 'aster_ferric_oxide_composition',
 'aster_ferric_oxide_content',
 'aster_ferrous_iron_content_in_mgoh',
 'aster_ferrous_iron_index',
 'aster_green_vegetation',
 'aster_gypsum_index',
 'aster_kaolin_group_index',
 'aster_mgoh_group_composition',
 'aster_mgoh_group_content',
 'aster_opaque_index',
 'aster_silica_index',
 'aster_quartz_index',
 'multi_scale_topographic_position',
 'weathering_intensity']</code></pre>
</div>
</div>
<p>Each of these layers has a more descriptive title property.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dea_wms[<span class="st">"ga_ls_wo_fq_cyear_3"</span>].title</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>'DEA Water Observations Calendar Year (Landsat)'</code></pre>
</div>
</div>
<p>We can also see what <code>styles</code> the WMS server can use to render web map images.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>dea_wms[<span class="st">"ga_ls_wo_fq_cyear_3"</span>].styles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>{'annual_wofs_frequency_3': {'title': 'Water Summary',
  'legend': 'https://ows.dea.ga.gov.au/legend/ga_ls_wo_fq_cyear_3/annual_wofs_frequency_3/legend.png',
  'legend_format': 'image/png'},
 'annual_wofs_frequency_cvf_3': {'title': 'Water Summary (colour vision friendly)',
  'legend': 'https://ows.dea.ga.gov.au/legend/ga_ls_wo_fq_cyear_3/annual_wofs_frequency_cvf_3/legend.png',
  'legend_format': 'image/png'},
 'annual_wofs_frequency_blues_transparent_3': {'title': 'Water Summary (blue)',
  'legend': 'https://ows.dea.ga.gov.au/legend/ga_ls_wo_fq_cyear_3/annual_wofs_frequency_blues_transparent_3/legend.png',
  'legend_format': 'image/png'},
 'annual_wofs_wet_3': {'title': 'Wet Count',
  'legend': 'https://ows.dea.ga.gov.au/legend/ga_ls_wo_fq_cyear_3/annual_wofs_wet_3/legend.png',
  'legend_format': 'image/png'},
 'annual_wofs_clear_3': {'title': 'Clear Count',
  'legend': 'https://ows.dea.ga.gov.au/legend/ga_ls_wo_fq_cyear_3/annual_wofs_clear_3/legend.png',
  'legend_format': 'image/png'}}</code></pre>
</div>
</div>
<p>We can see what coordinate reference systems the WMS server can use when generating web map images.</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dea_wms[<span class="st">"ga_ls_wo_fq_cyear_3"</span>].crsOptions</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>['EPSG:3577',
 'EPSG:4238',
 'EPSG:32756',
 'EPSG:3857',
 'WIKID:102171',
 'EPSG:4326',
 'EPSG:3111']</code></pre>
</div>
</div>
<section id="recap-quiz-1" class="level4">
<h4 class="anchored" data-anchor-id="recap-quiz-1">Recap quiz</h4>
<p><strong>Can you use the above information that describes the <em>DEA Water Observations Calendar Year (Landsat)</em> WMS layer to create an ipyleaflet <code>WMSLayer()</code> object and add it to a new <code>Map</code> object?</strong></p>
<p><strong>The <em>DEA Water Observations Calendar Year (Landsat)</em> dataset is a satellite-derived water summary showing what percentage of clear satellite observations were detected as wet in a year. The legend for the WMS layer is below.</strong></p>
<p><img src="https://ows.dea.ga.gov.au/legend/ga_ls_wo_fq_cyear_3/annual_wofs_frequency_3/legend.png" class="img-fluid"></p>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">## ADD CODE HERE ##</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<details>
<summary>
<b>answer</b>
</summary>
<div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>dea_wos_wms <span class="op">=</span> WMSLayer(</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://ows.dea.ga.gov.au"</span>,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span><span class="st">"ga_ls_wo_fq_cyear_3"</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"image/png"</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    transparent<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    styles<span class="op">=</span><span class="st">"annual_wofs_frequency_3"</span>,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"DEA Water Observations Calendar Year (Landsat)"</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(basemap<span class="op">=</span>basemaps.CartoDB.Positron, center<span class="op">=</span>(<span class="op">-</span><span class="dv">32</span>, <span class="dv">117</span>), zoom<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>m.add_layer(dea_wos_wms)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>
</p>
</section>
</section>
<section id="custom-wmslayer-objects" class="level2">
<h2 class="anchored" data-anchor-id="custom-wmslayer-objects">Custom <code>WMSLayer()</code> objects</h2>
<p>If the WMS server accepts other query parameters to define what data and styling is used to create web map images, we need to extend the base <code>WMSLayer()</code> class to create a custom class to handle the extra query parameters. A common extra query parameter that WMS servers implement is <code>time</code> which specifies a date or time for the underlying data used to generate the web map images.</p>
<p>The below code snipped demonstrates how to create a custom <code>TimeWMSLayer()</code> class with an extra <code>time</code> parameter.</p>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> TimeWMSLayer(WMSLayer):</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    time <span class="op">=</span> Unicode(<span class="st">''</span>).tag(sync<span class="op">=</span><span class="va">True</span>, o<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="split-map-controls" class="level3">
<h3 class="anchored" data-anchor-id="split-map-controls">Split map controls</h3>
<p>The Digital Earth Australia WMS server endpoint for the DEA Land Cover Calendar Year (Landsat) dataset accepts a <code>time</code> parameter that allows us to define a year to generate the web map images for.</p>
<p>ipyleaflet also provides an option for a <code>SplitMapControl</code> where one web map is rendered on the left panel and another on the right panel. We can create a <code>SplitMapControl</code> that displays the DEA Land Cover Calendar Year (Landsat) dataset for different years to allow us to see spatial patterns of land cover change over time.</p>
<p>First, we need to create two <code>TimeWMSLayer</code> objects that represent the DEA Land Cover Calendar Year (Landsat) dataset for 2020 and 2000. You can see that we pass in a date string to the <code>time</code> argument. These are instances of the custom class we created above.</p>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create WMS layer with level3 style for DEA Land Cover Calendar Year (Landsat)</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>dea_2020_basic_lc_wms <span class="op">=</span> TimeWMSLayer(</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://ows.dea.ga.gov.au"</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span><span class="st">"ga_ls_landcover"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"image/png"</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    transparent<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    styles<span class="op">=</span><span class="st">"level3"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    time<span class="op">=</span><span class="st">"2020-01-01"</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"DEA Land Cover Calendar Year (Landsat)"</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>dea_2000_basic_lc_wms <span class="op">=</span> TimeWMSLayer(</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://ows.dea.ga.gov.au"</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span><span class="st">"ga_ls_landcover"</span>,</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"image/png"</span>,</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    transparent<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    styles<span class="op">=</span><span class="st">"level3"</span>,</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    time<span class="op">=</span><span class="st">"2000-01-01"</span>,</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"DEA Land Cover Calendar Year (Landsat)"</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="co"># create dict to define legend elements and colour</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>level_3_legend <span class="op">=</span> {</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Water"</span>: <span class="st">"#4d9fdc"</span>,</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Natural Bare Surface"</span>: <span class="st">"#f3ab69"</span>,</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Artificial Surface"</span>: <span class="st">"#da5c69"</span>,</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Natural Aquatic Vegetation"</span>: <span class="st">"#34bf79"</span>,</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Natural Terrestrial Vegetation"</span>: <span class="st">"#1f7912"</span>,</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Cultivated Terrestrial Vegetation"</span>: <span class="st">"#acbc2e"</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="co"># create LegendControl object</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>legend <span class="op">=</span> LegendControl(level_3_legend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We’re now ready to create a split map. First we create a <code>Map</code> object. Then we create a <code>SplitMapControl</code> object using the <code>SplitMapControl()</code> constructor function. The <code>SplitMapControl()</code> constructor function has <code>left_layer</code> and <code>right_layer</code> arguments; we’ll pass the <code>TimeWMSLayer</code> object for the 2000 land cover map (<code>dea_2000_basic_lc_wms</code>) to the <code>left_layer</code> and the <code>TimeWMSLayer</code> object for the 2020 land cover map (<code>dea_2020_basic_lc_wms</code>) to the <code>right_layer</code>.</p>
<p>Then we add the <code>SplitMapControl</code> object to the <code>Map</code> object. This should generate two linked web maps centred on Perth. If you pan around in the web map you should see land cover change between 2000 and 2020 as Perth has urbanised. See if you can spot other cases of land cover change around Western Australia (e.g.&nbsp;conversion of natural terrestrial vegetation to cultivated terrestrial vegetation).</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new map instance</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(basemap<span class="op">=</span>basemaps.CartoDB.Positron, center<span class="op">=</span>(<span class="op">-</span><span class="dv">32</span>, <span class="dv">116</span>), zoom<span class="op">=</span><span class="dv">11</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>split_map_control <span class="op">=</span> SplitMapControl(left_layer<span class="op">=</span>dea_2000_basic_lc_wms, right_layer<span class="op">=</span>dea_2020_basic_lc_wms)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>m.add_control(split_map_control)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>m.add_control(legend)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"c8f46595a11941a8918ea9812cfab06a","version_major":2,"version_minor":0}
</script>
</div>
</div>
</section>
<section id="data-wa-data-catalogue" class="level3">
<h3 class="anchored" data-anchor-id="data-wa-data-catalogue">Data WA data catalogue</h3>
<p>The <a href="https://catalogue.data.wa.gov.au/dataset" target="_blank">Data WA Data Catalogue</a> is a portal where you can search for public datasets for Western Australia. Many of these datasets are published as WMS layers - you can select <code>WMS</code> as one of the <code>formats</code> to filter datasets in the catalogue.</p>
<p>DPIRD publish their <em>Generalised agricultural land use of Western Australia (DPIRD-003)</em> layer via WMS. It is layer <code>1</code> at the WMS Server with the URL <em>https://services.slip.wa.gov.au/public/services/SLIP_Public_Services/Farming/MapServer/WMSServer</em>. It’s description is a layer of <em>generalised land use regions based on their primary agricultural land use</em> and we can display it on a web map via WMS with the following snippet.</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>dpird_landuse_wms <span class="op">=</span> WMSLayer(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://services.slip.wa.gov.au/public/services/SLIP_Public_Services/Farming/MapServer/WMSServer"</span>,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span><span class="st">"1"</span>,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"image/png"</span>,</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    transparent<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"Generalised agricultural land use of Western Australia (DPIRD-003)"</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(basemap<span class="op">=</span>basemaps.CartoDB.Positron, center<span class="op">=</span>(<span class="op">-</span><span class="dv">32</span>, <span class="dv">117</span>), zoom<span class="op">=</span><span class="dv">7</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>m.add_layer(dpird_landuse_wms)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"e3b7902067bc4cf7ac4e40739250e97c","version_major":2,"version_minor":0}
</script>
</div>
</div>
<p>It is hard to interpret this map without a legend. The following dictionary object describes a legend for this map.</p>
<section id="recap-quiz-2" class="level4">
<h4 class="anchored" data-anchor-id="recap-quiz-2">Recap quiz</h4>
<p><strong>Can you add the below dictionary object as a legend on a web map visualising DPIRD’s <em>Generalised agricultural land use of Western Australia (DPIRD-003)</em> WMS layer?</strong></p>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dpird_land_use_legend <span class="op">=</span> {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Arid Interior"</span>: <span class="st">"#fdf54d"</span>,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Cattle Pastoral"</span>: <span class="st">"#f6bb79"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Cropping Cereals Legumes"</span>: <span class="st">"#f19338"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Dairy"</span>: <span class="st">"#3bdede"</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Horticulture"</span>: <span class="st">"#45ed00"</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Livestock Grazing"</span>: <span class="st">"#a8e3f9"</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"No Production"</span>: <span class="st">"#fefaa8"</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sheep Pastoral"</span>: <span class="st">"#bdbdbd"</span>,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Viticulture"</span>: <span class="st">"#b602b6"</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">## ADD CODE HERE ##</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<details>
<summary>
<b>answer</b>
</summary>
<div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>dpird_landuse_wms <span class="op">=</span> WMSLayer(</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://services.slip.wa.gov.au/public/services/SLIP_Public_Services/Farming/MapServer/WMSServer"</span>,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span><span class="st">"1"</span>,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"image/png"</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    transparent<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"Generalised agricultural land use of Western Australia (DPIRD-003)"</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>legend <span class="op">=</span> LegendControl(dpird_land_use_legend)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(basemap<span class="op">=</span>basemaps.CartoDB.Positron, center<span class="op">=</span>(<span class="op">-</span><span class="dv">32</span>, <span class="dv">117</span>), zoom<span class="op">=</span><span class="dv">7</span>)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>m.add_layer(dpird_landuse_wms)</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>m.add_control(legend)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>
</p>
</section>
</section>
</section>
<section id="xyz-tiles-and-slippy-maps" class="level2">
<h2 class="anchored" data-anchor-id="xyz-tiles-and-slippy-maps">XYZ Tiles and slippy maps</h2>
<p>Tiled web maps (or XYZ maps or “slippy” maps) are based on pre-generated images, drawn from spatial data, for a range of possible zoom levels and locations. Generally, these pre-generated images are JPEG or PNG files storing a 256 x 256 pixel image. Each image is a “map tile”.</p>
<p>The web map images that we rendered above are based on WMS layers and are generated dynamically by a server in response to client requests. In contrast, XYZ map tiles are already computed and are stored in a directory on the server or a cloud storage bucket. As a user pans around and zooms in and out on a web map, the server sends the required map tiles to fill the display.</p>
<p>As the tiles are pre-generated, XYZ map tiles are more performant than dynamic web maps. The performance benefits of XYZ web maps is particularly apparent with larger spatial datasets which would be computationally intensive to generate on-demand (e.g.&nbsp;high-resolution images satellite and aerial images).</p>
<section id="recap-quiz-3" class="level4">
<h4 class="anchored" data-anchor-id="recap-quiz-3">Recap quiz</h4>
<details>
<summary>
<b>What are potential disadvantages of serving web map data as pre-generated XYZ map tiles?</b>
</summary>
<ul>
<li>
There are storage costs associated with storing pre-generated map tiles for all locations and zoom levels (e.g.&nbsp;consider the storage costs associated with high-resolution RGB web maps with complete global coverage).
</li>
<li>
The up-front computational costs to generate the map tiles can significant and problematic if the map tiles need to be updated frequently.
</li>
<li>
As the map tile images are pre-generated it is not possible to customise their styling.
</li>
</ul>
</details>
<p>
</p>
<p>Despite these limitations, most basemaps (e.g.&nbsp;the satellite basemap in Google Maps or Bing Maps) which are used to provide geographic context are served as XYZ tiles because of the performance benefits.</p>
<p>XYZ map tiles are described by their zoom level (the Z) and coordinates (the X and Y) and comrpise a pyramid of images.</p>
<p>At zoom level 0 the entire world fits into a 256 x 256 pixel image in the web mercator projection system (<code>EPSG:3857</code>). Let’s get this most zoomed out map tile for OpenStreetMap. XYZ map tiles have a request format of <code>https://{URL}/{zoom level}/{x coordinate}/{y coordinate}.png</code>.</p>
<p>For OpenStreetMap this request would be <code>https://tile.openstreetmap.org/0/0/0.png</code>.</p>
<p><img src="https://tile.openstreetmap.org/0/0/0.png" class="img-fluid"> <strong>OpenStreetMap zoom = 0, x = 0, y = 0 <code>https://tile.openstreetmap.org/0/0/0.png</code></strong></p>
<p>At each zoom level, the number of 256 x 256 pixel map tiles increases by a factor of 4. The map tile coordinates always start with x = 0 and y = 0 in the top left.</p>
<p><img src="https://tile.openstreetmap.org/1/0/0.png" class="img-fluid"> <strong>OpenStreetMap zoom = 1, x = 0, y = 0, request = <code>https://tile.openstreetmap.org/1/0/0.png</code></strong></p>
<p><img src="https://tile.openstreetmap.org/1/0/1.png" class="img-fluid"> <strong>OpenStreetMap zoom = 1, x = 0, y = 1, request = <code>https://tile.openstreetmap.org/1/0/1.png</code></strong></p>
<p><img src="https://tile.openstreetmap.org/1/1/0.png" class="img-fluid"> <strong>OpenStreetMap zoom = 1, x = 1, y = 0, request = <code>https://tile.openstreetmap.org/1/1/0.png</code></strong></p>
<p><img src="https://tile.openstreetmap.org/1/1/1.png" class="img-fluid"> <strong>OpenStreetMap zoom = 1, x = 1, y = 1, request = <code>https://tile.openstreetmap.org/1/1/1.png</code></strong></p>
<p>At zoom level <span class="math inline">\(n\)</span> there are <span class="math inline">\(2^{n} * 2^{n}\)</span> map tiles. We can use this formula to compute the number of map tiles at different zoom levels. Zoom levels 0 to 18 are most common. We can see how the storage requirements for XYZ tiles at higher zoom levels quickly increases.</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 0: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">0</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">0</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 1: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">1</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">1</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 2: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">2</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 3: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">3</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">3</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 4: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">4</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">4</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 5: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">5</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">5</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 6: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">6</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">6</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 7: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">7</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">7</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 8: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">8</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">8</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 9: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">9</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">9</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 10: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">10</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">10</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 11: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">11</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">11</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 12: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">12</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">12</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 13: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">13</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">13</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 14: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">14</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">14</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 15: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">15</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">15</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 16: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">16</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">16</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 17: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">17</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">17</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"number of tiles at zoom level 18: </span><span class="sc">{</span>(<span class="dv">2</span><span class="op">**</span><span class="dv">18</span>) <span class="op">*</span> (<span class="dv">2</span><span class="op">**</span><span class="dv">18</span>)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>number of tiles at zoom level 0: 1
number of tiles at zoom level 1: 4
number of tiles at zoom level 2: 16
number of tiles at zoom level 3: 64
number of tiles at zoom level 4: 256
number of tiles at zoom level 5: 1024
number of tiles at zoom level 6: 4096
number of tiles at zoom level 7: 16384
number of tiles at zoom level 8: 65536
number of tiles at zoom level 9: 262144
number of tiles at zoom level 10: 1048576
number of tiles at zoom level 11: 4194304
number of tiles at zoom level 12: 16777216
number of tiles at zoom level 13: 67108864
number of tiles at zoom level 14: 268435456
number of tiles at zoom level 15: 1073741824
number of tiles at zoom level 16: 4294967296
number of tiles at zoom level 17: 17179869184
number of tiles at zoom level 18: 68719476736</code></pre>
</div>
</div>
<p>XYZ tiles at higher zoom levels are rendered with progressively more spatial detail.</p>
<p><img src="https://tile.openstreetmap.org/5/9/20.png" class="img-fluid"> <strong>OpenStreetMap zoom = 5, x = 9, y = 20, request = <code>https://tile.openstreetmap.org/5/9/20.png</code></strong></p>
<p>We can convert latitude and longitude coordinates to XYZ map tile coordinates. The following is a convenient function from the <a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames" target="_blank">OpenStreetMap Wiki</a> for this task.</p>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> deg2num(lat_deg, lon_deg, zoom):</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  lat_rad <span class="op">=</span> math.radians(lat_deg)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  n <span class="op">=</span> <span class="fl">2.0</span> <span class="op">**</span> zoom</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  xtile <span class="op">=</span> <span class="bu">int</span>((lon_deg <span class="op">+</span> <span class="fl">180.0</span>) <span class="op">/</span> <span class="fl">360.0</span> <span class="op">*</span> n)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  ytile <span class="op">=</span> <span class="bu">int</span>((<span class="fl">1.0</span> <span class="op">-</span> math.asinh(math.tan(lat_rad)) <span class="op">/</span> math.pi) <span class="op">/</span> <span class="fl">2.0</span> <span class="op">*</span> n)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (xtile, ytile)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Perth’s coordinates in latitude and longitude are -31.9523 and 115.8613. Let’s pass these numbers into the <code>deg2num()</code> function to return the appropriate tile numbers.</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># zoom level 6</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"x coordinate and y coordinate for Perth at zoom level 6: </span><span class="sc">{</span>deg2num(<span class="op">-</span><span class="fl">31.9523</span>, <span class="fl">115.8613</span>, <span class="dv">6</span>)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># zoom level 12</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"x coordinate and y coordinate for Perth at zoom level 12: </span><span class="sc">{</span>deg2num(<span class="op">-</span><span class="fl">31.9523</span>, <span class="fl">115.8613</span>, <span class="dv">12</span>)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>x coordinate and y coordinate for Perth at zoom level 6: (52, 38)
x coordinate and y coordinate for Perth at zoom level 12: (3366, 2432)</code></pre>
</div>
</div>
<p><img src="https://tile.openstreetmap.org/6/52/38.png" class="img-fluid"> <strong>OpenStreetMap zoom = 6, x = 52, y = 38, request = <code>https://tile.openstreetmap.org/6/52/38.png</code></strong></p>
<p><img src="https://tile.openstreetmap.org/12/3366/2432.png" class="img-fluid"> <strong>OpenStreetMap zoom = 12, x = 3366, y = 2432, request = <code>https://tile.openstreetmap.org/12/3366/2432.png</code></strong></p>
<p>ipyleaflet has a <code>TileLayer()</code> class that can be used to add XYZ map tiles to a web map using a <code>Map</code> object’s <code>add_layer()</code> method.</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>osm_tiles <span class="op">=</span> TileLayer(</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://</span><span class="sc">{s}</span><span class="st">.tile.openstreetmap.org/</span><span class="sc">{z}</span><span class="st">/</span><span class="sc">{x}</span><span class="st">/</span><span class="sc">{y}</span><span class="st">.png"</span>,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"Map data (c) &lt;a href=”https://openstreetmap.org”&gt;OpenStreetMap&lt;/a&gt; contributors"</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(center<span class="op">=</span>(<span class="op">-</span><span class="fl">31.9523</span>, <span class="fl">115.8613</span>), zoom<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>m.add_layer(osm_tiles)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"bc49ad4132a247dfbb398146e7783c90","version_major":2,"version_minor":0}
</script>
</div>
</div>
<p>You can find a list of XYZ map tile providers <a href="https://leaflet-extras.github.io/leaflet-providers/preview/" target="_blank">here</a>.</p>
</section>
<section id="recap-quiz-4" class="level4">
<h4 class="anchored" data-anchor-id="recap-quiz-4">Recap quiz</h4>
<p><strong>Can you add ESRI World Imagery XYZ map tiles to a <code>Map</code> object centred on Perth? The URL is: <code>https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png</code> and the attribution is: <code>"Tiles &amp;copy; Esri &amp;mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"</code>.</strong></p>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">## ADD CODE HERE ##</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<details>
<summary>
<b>answer</b>
</summary>
<div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>esri_tiles <span class="op">=</span> TileLayer(</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/</span><span class="sc">{z}</span><span class="st">/</span><span class="sc">{y}</span><span class="st">/</span><span class="sc">{x}</span><span class="st">.png"</span>,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"Tiles &amp;copy; Esri &amp;mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(center<span class="op">=</span>(<span class="op">-</span><span class="fl">31.9523</span>, <span class="fl">115.8613</span>), zoom<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>m.add_layer(esri_tiles)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>
</p>
<p><strong>Data WA’s Data Catalogue lists a <a href="https://catalogue.data.wa.gov.au/dataset/farm-dams-of-the-south-west-agricultural-region-of-wa" target="_blank">Farm Dams of Western Australia dataset</a> which is available as a WMS layer from the following URL: <em>https://services.slip.wa.gov.au/public/services/SLIP_Public_Services/Water/MapServer/WMSServer</em> at <code>layers</code> <code>0</code>. Can you create a web map where the farm dams are rendered as a WMS layer on top of the ESRI World Imagery XYZ map tiles?</strong></p>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">## ADD CODE HERE ##</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<details>
<summary>
<b>answer</b>
</summary>
<div class="sourceCode" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>esri_tiles <span class="op">=</span> TileLayer(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/</span><span class="sc">{z}</span><span class="st">/</span><span class="sc">{y}</span><span class="st">/</span><span class="sc">{x}</span><span class="st">.png"</span>,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"Tiles &amp;copy; Esri &amp;mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>farm_dams_wms <span class="op">=</span> WMSLayer(</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"https://services.slip.wa.gov.au/public/services/SLIP_Public_Services/Water/MapServer/WMSServer"</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    layers<span class="op">=</span><span class="st">"0"</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"image/png"</span>,</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    transparent<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"Farm dams of Western Australia (DPIRD-083) "</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(center<span class="op">=</span>(<span class="op">-</span><span class="dv">32</span>, <span class="dv">117</span>), zoom<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>m.add_layer(esri_tiles)</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>m.add_layer(farm_dams_wms)</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</section>
<section id="creating-your-own-xyz-tiles" class="level3">
<h3 class="anchored" data-anchor-id="creating-your-own-xyz-tiles">Creating your own XYZ tiles</h3>
<p>To create your own XYZ tiles from raster data you can use the <a href="https://gdal.org/programs/gdal2tiles.html" target="_blank">gdal2tiles tool</a> or the Python package <a href="https://cogeotiff.github.io/rio-tiler/" target="_blank">rio-tiler</a>. However, there are some data transformation steps you’ll need to go through including rescaling the pixel values to between 0 and 255, setting the <code>dtype</code> to <code>byte</code>, and reprojecting the data to Web Mercator (<code>EPSG:3857</code>). This can be a long-running operation so we won’t demonstrate it here.</p>
<p>However, if we have access to cloud-optimised GeoTIFF files (COG), we can read subsets of data from these files and generate XYZ tiles on-the-fly. Again, we face the debate between pre-generated and dynamically generated web map data. A good discussion of these issues can be found <a href="https://developmentseed.org/titiler/dynamic_tiling/" target="_blank">here</a>.</p>
<p>However, COG files do present a nice trade-off between pre-generated XYZ tiles and dynamically generated WMS layers. COG files are GeoTIFF files, like the local GeoTIFF files we have been using to store raster data, but they support reading data via HTTP GET requests with with range requests specifyied by a <code>Range</code> header. This allows us to i) store large COG files either locally or in cloud storage, ii) only read subsets of the data in the COG file into our program via HTTP requests, and iii) avoid the need to set up, manage, and interact with a map server that provides WMS services for dynamic web map image generation.</p>
<p>In the <em>lab-6-self-guided.ipynb</em> notebook we made windowed reads of raster data, using rasterio, that corresponded to an area of interest from COG files in Microsoft’s cloud storage (the COG files were stored in Microsoft Azure blob storage and accessed via Microsoft’s Planetary Computer). This is an example of making a HTTP range request to a COG file. However, we can also read data from COG files in the cloud, dynamically convert this data to XYZ tiles, and render it on web maps.</p>
<p>The company Development Seed have developed a web application that can generate XYZ tiles from COG files called <a href="https://developmentseed.org/titiler/" target="_blank">TiTiler</a>. They host a demo version of this application at: https://titiler.xyz/. We can use it to dynamically generate XYZ tiles to render on an ipyleaflet <code>Map</code> object (for larger-scale projects you would want to set up your own TiTiler application).</p>
<p>First, we need some COG data that is openly available and stored in the cloud. Maxar, a commericial high-resolution satellite imaging company, provide <a href="https://www.maxar.com/open-data" target="_blank">open data as COG files</a> for locations affected by natural disasters. (You can access this data scrolling down to where the events are listed and right-clicking on the <em>download</em> button to find the URL for a COG file).</p>
<p>Below are example URLs for Maxar’s open data related to <a href="https://www.maxar.com/open-data/pakistan-flooding22" target="_blank">flooding in Pakistan</a> and <a href="https://www.maxar.com/open-data/australia-wildfires" target="_blank">bushfires in Australia</a>. The data in these COG files is pre-formatted for viewing as RGB images.</p>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>pakistan_cog <span class="op">=</span> <span class="st">"https://maxar-opendata.s3.us-west-2.amazonaws.com/events/pakistan-flooding22/ard/43/031133231111/2019-11-29/1040010055A5E300-visual.tif"</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>australia_cog <span class="op">=</span> <span class="st">"https://opendata.digitalglobe.com/events/australia-wildfires/pre-event/2018-05-03/103001007B036E00/103001007B036E00.tif"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We’ll also create a variable that stores the URL for Development Seed’s TiTiler endpoint.</p>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>titiler_endpoint <span class="op">=</span> <span class="st">"https://titiler.xyz"</span>  <span class="co"># Developmentseed Demo endpoint. Please be kind.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If we append the URL for a COG as a query parameter in a GET request to the <code>/cog/tilejson.json</code> endpoint of the TiTiler API, a TileJSON document for the COG is returned to us. This includes a <code>tiles</code> property which is a URL that can be used to serve XYZ tiles from the COG, the minimum and maximum zoom levels the COG will support, and the location of the COG including it’s centre point. We can use this information to create an ipyleaflet <code>TileLayer()</code> object which we can render on a <code>Map</code> object.</p>
<p>You can inspect the <a href="https://titiler.xyz/docs" target="_blank">TiTiler API</a> - it has the same swagger Open API format that was introduced in lab 6. Look at the various endpoints that we can make requests to and the type of information that is returned.</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>titiler_endpoint<span class="sc">}</span><span class="ss">/cog/tilejson.json"</span>,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    params <span class="op">=</span> {</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>: pakistan_cog, <span class="co"># note we pass in the URL to the Pakistan COG here. </span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>).json()</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>r</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>{'tilejson': '2.2.0',
 'version': '1.0.0',
 'scheme': 'xyz',
 'tiles': ['https://titiler.xyz/cog/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fmaxar-opendata.s3.us-west-2.amazonaws.com%2Fevents%2Fpakistan-flooding22%2Fard%2F43%2F031133231111%2F2019-11-29%2F1040010055A5E300-visual.tif'],
 'minzoom': 12,
 'maxzoom': 19,
 'bounds': [73.18105735718605,
  35.36324796743825,
  73.24058171478526,
  35.411992731520634],
 'center': [73.21081953598565, 35.38762034947944, 12]}</code></pre>
</div>
</div>
<p>Let’s use the information in the TileJSON document, referenced by <code>r</code>, to visualise the COG data as XYZ tiles on a <code>Map</code>. If you zoom in you will see this is a high-resolution satellite image with detail such as buildings, individual trees, and bridges visible. It would be time-consuming to download this data and computationally-intensive to visualise all of at it’s native high-resolution. This is an advantage of only requesting the data required to fill your display at its current zoom level.</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a TileLayer to generate XYZ tiles using the tiles URL in the TileJSON document</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>maxar_tiles <span class="op">=</span> TileLayer(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span>r[<span class="st">"tiles"</span>][<span class="dv">0</span>],</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"Maxar OpenData"</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Map object centred on the center property from a TileJSON document</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Note how we index into the center property to the TileJSON document</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(center<span class="op">=</span>(r[<span class="st">"center"</span>][<span class="dv">1</span>], r[<span class="st">"center"</span>][<span class="dv">0</span>]), zoom<span class="op">=</span>r[<span class="st">"center"</span>][<span class="dv">2</span>])</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the XYZ TileLayer to the Map</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>m.add_layer(maxar_tiles)</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"23e5b0c0821a4e9c84d8ba84ab94573b","version_major":2,"version_minor":0}
</script>
</div>
</div>
<section id="recap-quiz-5" class="level4">
<h4 class="anchored" data-anchor-id="recap-quiz-5">Recap quiz</h4>
<p><strong>Can you use the COG file located at the URL referenced by <code>australia_cog</code> to generate XYZ tiles that are rendered on an ipyleaflet <code>Map</code>?</strong></p>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">## ADD CODE HERE ##</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<details>
<summary>
<b>answer</b>
</summary>
<div class="sourceCode" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>titiler_endpoint<span class="sc">}</span><span class="ss">/cog/tilejson.json"</span>,</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    params <span class="op">=</span> {</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>: australia_cog, <span class="co"># note we pass in the URL to the Australia COG here. </span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>).json()</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a TileLayer to generate XYZ tiles using the tiles URL in the TileJSON document</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>maxar_tiles <span class="op">=</span> TileLayer(</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span>r[<span class="st">"tiles"</span>][<span class="dv">0</span>],</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"Maxar OpenData"</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Map object centred on the center property from a TileJSON document</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Note how we index into the center property to the TileJSON document</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(center<span class="op">=</span>(r[<span class="st">"center"</span>][<span class="dv">1</span>], r[<span class="st">"center"</span>][<span class="dv">0</span>]), zoom<span class="op">=</span>r[<span class="st">"center"</span>][<span class="dv">2</span>])</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the XYZ TileLayer to the Map</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>m.add_layer(maxar_tiles)</span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>
</p>
</section>
</section>
<section id="xyz-tiles-and-stac-collections" class="level3">
<h3 class="anchored" data-anchor-id="xyz-tiles-and-stac-collections">XYZ tiles and STAC Collections</h3>
<p>In the <em>lab-6-self-guided.ipynb</em> notebook we introduced spatio-temporal asset collections (STAC) as a format for organising geospatial data in the cloud and using STAC APIs to query STAC Collections for spatio-temporal assets.</p>
<p>Often, the spatio-temporal assets catalogued by STAC Collections are COG files. This means we should be able to find spatio-temporal assets in a STAC Collection and generate XYZ tiles from them that we can render on web maps. The TiTiler API provides several endpoints for working with STAC Collections.</p>
<p>Below we’ll demonstrate how to generate XYZ tiles from Sentinel-2 data stored in a STAC Collection in Amazon Web Services. Following the same process that we undertook in <em>lab-6-self-guided.ipynb</em> notebook we’ll use a <code>pystac_client.Client</code> object pointing to the Amazon Web Services STAC API at: <em>https://earth-search.aws.element84.com/v0</em>.</p>
<p>Then we’ll using the <code>pystac_client.Client</code> object’s <code>search()</code> method to search for Sentinel-2 spatial-temporal assets that intersect with the bounding box for a field in Western Australia and the month of October 2019.</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>bbox <span class="op">=</span> [<span class="fl">117.47847020738</span>, <span class="op">-</span><span class="fl">31.6059444159889</span>, <span class="fl">117.503591091284</span>, <span class="op">-</span><span class="fl">31.5913653675164</span>]</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>time_of_interest <span class="op">=</span> <span class="st">"2019-10-01/2019-11-01"</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>aws_catalog <span class="op">=</span> pystac_client.Client.<span class="bu">open</span>(</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://earth-search.aws.element84.com/v0"</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>aws_search <span class="op">=</span> aws_catalog.search(</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    collections<span class="op">=</span>[<span class="st">"sentinel-s2-l2a-cogs"</span>],</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>    bbox<span class="op">=</span>bbox,</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>    datetime<span class="op">=</span>time_of_interest,</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    query<span class="op">=</span>{<span class="st">"eo:cloud_cover"</span>: {<span class="st">"lt"</span>: <span class="dv">10</span>}},</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Check how many items were returned</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>aws_items <span class="op">=</span> aws_search.item_collection()</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Returned </span><span class="sc">{</span><span class="bu">len</span>(aws_items)<span class="sc">}</span><span class="ss"> Items"</span>)</span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>aws_items</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Returned 2 Items</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="31">



<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #E1E1E1;
        border: 3px solid #9D9D9D;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">
                    ItemCollection
                </h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                
            </table>

            
                <details>
                    
                    <summary style="margin-bottom: 10px; margin-top: 10px">
                        <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Items</h4>
                    </summary>
                    
                        

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #DBF5FF;
        border: 3px solid #4CC9FF;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Item: S2B_50JNL_20191026_0_L2A</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>ID</strong>: S2B_50JNL_20191026_0_L2A </td></tr>
                
                
                    <tr><td style="text-align: left;"><strong>Bounding Box:</strong> [116.99979944683326, -31.72323454687613, 118.15866343531508, -30.727472475558006] </td></tr>
                
                
                    <tr><td style="text-align: left;"><strong>Datetime:</strong> 2019-10-26 02:16:24+00:00 </td></tr>
                
                
                    
                        <tr><td style="text-align: left;"><strong>datetime:</strong> 2019-10-26T02:16:24Z </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>platform:</strong> sentinel-2b </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>constellation:</strong> sentinel-2 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>instruments:</strong> ['msi'] </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>gsd:</strong> 10 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>view:off_nadir:</strong> 0 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>proj:epsg:</strong> 32750 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:utm_zone:</strong> 50 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:latitude_band:</strong> J </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:grid_square:</strong> NL </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:sequence:</strong> 0 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:product_id:</strong> S2B_MSIL2A_20191026T020449_N0213_R017_T50JNL_20191026T054559 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:data_coverage:</strong> 100 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>eo:cloud_cover:</strong> 0.64 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:valid_cloud_cover:</strong> True </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>created:</strong> 2020-08-23T07:56:25.769Z </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>updated:</strong> 2020-08-23T07:56:25.769Z </td></tr>
                    
                
                
        
            <tr><td style="text-align: left;"><strong>stac_extensions:</strong> ['eo', 'view', 'proj'] </td></tr>
        
    
            </tbody></table>
            
        <details>
            <summary style="margin-bottom: 10px; margin-top: 10px;">
                <h4 style="margin-bottom: 0px; display: inline;" class="anchored">STAC Extensions</h4>
            </summary>
            <table style="width: 100%; text-align: left;">
                
                    <tbody><tr><td style="text-align: left;"><a href="eo">eo</a></td></tr>
                
                    <tr><td style="text-align: left;"><a href="view">view</a></td></tr>
                
                    <tr><td style="text-align: left;"><a href="proj">proj</a></td></tr>
                
            </tbody></table>
        </details>
    
            
        <details>
            <summary style="margin-bottom: 10px; margin-top: 10px;">
                <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Assets</h4>
            </summary>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Thumbnail</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://roda.sentinel-hub.com/sentinel-s2-l1c/tiles/50/J/NL/2019/10/26/0/preview.jpg </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Thumbnail </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/png </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: True color image</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/L2A_PVI.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> True color image </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [343, 343] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [320, 0, 499980, 0, -320, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Original JSON metadata</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://roda.sentinel-hub.com/sentinel-s2-l2a/tiles/50/J/NL/2019/10/26/0/tileInfo.json </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Original JSON metadata </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> application/json </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Original XML metadata</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://roda.sentinel-hub.com/sentinel-s2-l2a/tiles/50/J/NL/2019/10/26/0/metadata.xml </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Original XML metadata </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> application/xml </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: True color image</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/TCI.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> True color image </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 1 (coastal)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B01.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 1 (coastal) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [1830, 1830] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [60, 0, 499980, 0, -60, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 2 (blue)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B02.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 2 (blue) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 3 (green)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B03.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 3 (green) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 4 (red)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B04.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 4 (red) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 5</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B05.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 5 </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 6</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B06.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 6 </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 7</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B07.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 7 </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 8 (nir)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B08.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 8 (nir) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 8A</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B8A.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 8A </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 9</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B09.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 9 </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [1830, 1830] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [60, 0, 499980, 0, -60, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 11 (swir16)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B11.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 11 (swir16) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 12 (swir22)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/B12.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 12 (swir22) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Aerosol Optical Thickness (AOT)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/AOT.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Aerosol Optical Thickness (AOT) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [1830, 1830] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [60, 0, 499980, 0, -60, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Water Vapour (WVP)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/WVP.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Water Vapour (WVP) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Scene Classification Map (SCL)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/SCL.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Scene Classification Map (SCL) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
        </details>
    
            
        <details>
            <summary style="margin-bottom: 10px; margin-top: 10px">
                <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Links</h4>
            </summary>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> self </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/S2B_50JNL_20191026_0_L2A </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
            <p style="color: #9D9D9D; margin-bottom: 0px;">Source STAC Item</p>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> derived_from </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> s3://cirrus-v0-data-1qm7gekzjucbq/sentinel-s2-l2a/50/J/NL/2019/10/S2B_50JNL_20191026_0_L2A/S2B_50JNL_20191026_0_L2A.json </td></tr>
            
                <tr><td style="text-align: left;"><strong>Media Type:</strong> application/json </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> parent </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> collection </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
            <p style="color: #9D9D9D; margin-bottom: 0px;">Earth Search</p>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> root </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> <client id="earth-search"> </client></td></tr>
            
                <tr><td style="text-align: left;"><strong>Media Type:</strong> application/json </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
        </details>
    
        </details>
    </div>
</div>
                    
                        

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #DBF5FF;
        border: 3px solid #4CC9FF;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Item: S2A_50JNL_20191021_1_L2A</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>ID</strong>: S2A_50JNL_20191021_1_L2A </td></tr>
                
                
                    <tr><td style="text-align: left;"><strong>Bounding Box:</strong> [116.99979944683326, -31.72323454687613, 118.15866343531508, -30.814675185272606] </td></tr>
                
                
                    <tr><td style="text-align: left;"><strong>Datetime:</strong> 2019-10-21 02:16:27+00:00 </td></tr>
                
                
                    
                        <tr><td style="text-align: left;"><strong>datetime:</strong> 2019-10-21T02:16:27Z </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>platform:</strong> sentinel-2a </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>constellation:</strong> sentinel-2 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>instruments:</strong> ['msi'] </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>gsd:</strong> 10 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>view:off_nadir:</strong> 0 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>proj:epsg:</strong> 32750 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:utm_zone:</strong> 50 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:latitude_band:</strong> J </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:grid_square:</strong> NL </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:sequence:</strong> 1 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:product_id:</strong> S2A_MSIL2A_20191021T020451_N0213_R017_T50JNL_20191021T053632 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:data_coverage:</strong> 80.81 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>eo:cloud_cover:</strong> 0 </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>sentinel:valid_cloud_cover:</strong> True </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>created:</strong> 2020-08-23T07:49:11.094Z </td></tr>
                    
                        <tr><td style="text-align: left;"><strong>updated:</strong> 2020-08-23T07:49:11.094Z </td></tr>
                    
                
                
        
            <tr><td style="text-align: left;"><strong>stac_extensions:</strong> ['eo', 'view', 'proj'] </td></tr>
        
    
            </tbody></table>
            
        <details>
            <summary style="margin-bottom: 10px; margin-top: 10px;">
                <h4 style="margin-bottom: 0px; display: inline;" class="anchored">STAC Extensions</h4>
            </summary>
            <table style="width: 100%; text-align: left;">
                
                    <tbody><tr><td style="text-align: left;"><a href="eo">eo</a></td></tr>
                
                    <tr><td style="text-align: left;"><a href="view">view</a></td></tr>
                
                    <tr><td style="text-align: left;"><a href="proj">proj</a></td></tr>
                
            </tbody></table>
        </details>
    
            
        <details>
            <summary style="margin-bottom: 10px; margin-top: 10px;">
                <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Assets</h4>
            </summary>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Thumbnail</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://roda.sentinel-hub.com/sentinel-s2-l1c/tiles/50/J/NL/2019/10/21/1/preview.jpg </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Thumbnail </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/png </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: True color image</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/L2A_PVI.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> True color image </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [343, 343] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [320, 0, 499980, 0, -320, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Original JSON metadata</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://roda.sentinel-hub.com/sentinel-s2-l2a/tiles/50/J/NL/2019/10/21/1/tileInfo.json </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Original JSON metadata </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> application/json </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Original XML metadata</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://roda.sentinel-hub.com/sentinel-s2-l2a/tiles/50/J/NL/2019/10/21/1/metadata.xml </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Original XML metadata </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> application/xml </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: True color image</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/TCI.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> True color image </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 1 (coastal)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B01.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 1 (coastal) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [1830, 1830] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [60, 0, 499980, 0, -60, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 2 (blue)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B02.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 2 (blue) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 3 (green)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B03.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 3 (green) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 4 (red)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B04.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 4 (red) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 5</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B05.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 5 </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 6</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B06.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 6 </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 7</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B07.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 7 </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 8 (nir)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B08.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 8 (nir) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 8A</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B8A.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 8A </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 9</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B09.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 9 </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [1830, 1830] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [60, 0, 499980, 0, -60, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 11 (swir16)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B11.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 11 (swir16) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Band 12 (swir22)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/B12.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Band 12 (swir22) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Aerosol Optical Thickness (AOT)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/AOT.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Aerosol Optical Thickness (AOT) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [1830, 1830] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [60, 0, 499980, 0, -60, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Water Vapour (WVP)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/WVP.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Water Vapour (WVP) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [10980, 10980] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [10, 0, 499980, 0, -10, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FED7E5;
        border: 3px solid #FA4C8C;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div>
        <details style="margin-left: 48px;">
            <summary style="margin-bottom: 20px;">
                <h3 style="margin-bottom: 0px; display: inline;" class="anchored">Asset: Scene Classification Map (SCL)</h3>
            </summary>
            <table style="width: 100%; text-align: left;">
                <tbody><tr><td style="text-align: left;"><strong>href</strong>: https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/SCL.tif </td></tr>
                
                    <tr><td style="text-align: left;"><strong>Title:</strong> Scene Classification Map (SCL) </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Media type:</strong> image/tiff; application=geotiff; profile=cloud-optimized </td></tr>
                
                
                
                    <tr><td style="text-align: left;"><strong>Owner:</strong>  </td></tr>
                
                
        
            <tr><td style="text-align: left;"><strong>proj:shape:</strong> [5490, 5490] </td></tr>
        
            <tr><td style="text-align: left;"><strong>proj:transform:</strong> [20, 0, 499980, 0, -20, 6600040, 0, 0, 1] </td></tr>
        
    
            </tbody></table>
        </details>
    </div>
</div>
            
        </details>
    
            
        <details>
            <summary style="margin-bottom: 10px; margin-top: 10px">
                <h4 style="margin-bottom: 0px; display: inline;" class="anchored">Links</h4>
            </summary>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> self </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/S2A_50JNL_20191021_1_L2A </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
            <p style="color: #9D9D9D; margin-bottom: 0px;">Source STAC Item</p>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> derived_from </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> s3://cirrus-v0-data-1qm7gekzjucbq/sentinel-s2-l2a/50/J/NL/2019/10/S2A_50JNL_20191021_1_L2A/S2A_50JNL_20191021_1_L2A.json </td></tr>
            
                <tr><td style="text-align: left;"><strong>Media Type:</strong> application/json </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> parent </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> collection </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
                

<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="
        width: 24px;
        height: 24px;
        background-color: #FFF7E5;
        border: 3px solid #FF6132;
        border-radius: 5px;
        position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h4 style="margin-bottom: 0px;" class="anchored">Link: </h4>
        
            <p style="color: #9D9D9D; margin-bottom: 0px;">Earth Search</p>
        
        <table style="width: 100%; text-align: left;">
            <tbody><tr><td style="text-align: left;"><strong>Rel:</strong> root </td></tr>
            <tr><td style="text-align: left;"><strong>Target:</strong> <client id="earth-search"> </client></td></tr>
            
                <tr><td style="text-align: left;"><strong>Media Type:</strong> application/json </td></tr>
            
            
        </tbody></table>
        
    </div>
</div>
            
        </details>
    
        </details>
    </div>
</div>
                    
                </details>
            
        </details>
    </div>
</div>
</div>
</div>
<p>You can click on the <code>ItemCollection</code> printed above and inspect the STAC Items returned by our search and their metadata. If you drill down into one of the <code>Item</code>s you will see <code>Links</code> which you can open and find the URL for the <code>source STAC Item</code>. We can append this URL as query parameter in a request to the TiTiler endpoint <code>/stac/info</code> to return information about the STAC Item and its spatio-temporal assets. This information is returned to our Python program as a dictionary object with each asset as a key.</p>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>stac_item_url <span class="op">=</span> <span class="st">"https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/S2B_50JNL_20191026_0_L2A"</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="ss">f"</span><span class="sc">{</span>titiler_endpoint<span class="sc">}</span><span class="ss">/stac/info"</span>,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    params <span class="op">=</span> {</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>: stac_item_url</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>).json()</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>r.keys()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>dict_keys(['overview', 'visual', 'B01', 'B02', 'B03', 'B04', 'B05', 'B06', 'B07', 'B08', 'B8A', 'B09', 'B11', 'B12', 'AOT', 'WVP', 'SCL'])</code></pre>
</div>
</div>
<p>Let’s look at the metadata for the <code>"visual"</code> asset. This is pre-formatted true colour image data stored as a cloud-optimised GeoTIFF file and generated from the Sentinel-2 satellite data. We can confirm this by printing the data values in the dictionary object indexed by the <code>"visual"</code> key. We can see it has three bands which correspond to red, green, and blue reflectance (see the <code>band_metadata</code> and <code>colorinterp</code> keys). We can also see an <code>overviews</code> key, this indicates <code>overviews</code> have been computed and are stored in the COG file - these are zoomed out low-resolution images. Please see this blog by <a href="https://developers.planet.com/docs/planetschool/an-introduction-to-cloud-optimized-geotiffs-cogs-part-1-overview/" target="_blank">Planet</a> that introduces the concept of COG overviews.</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>r[<span class="st">"visual"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>{'bounds': [116.99978889138299,
  -31.723243569066128,
  118.1586741001922,
  -30.727463361500092],
 'minzoom': 8,
 'maxzoom': 14,
 'band_metadata': [['b1', {}], ['b2', {}], ['b3', {}]],
 'band_descriptions': [['b1', ''], ['b2', ''], ['b3', '']],
 'dtype': 'uint8',
 'nodata_type': 'Nodata',
 'colorinterp': ['red', 'green', 'blue'],
 'count': 3,
 'width': 10980,
 'height': 10980,
 'nodata_value': 0.0,
 'overviews': [2, 4, 8, 16],
 'driver': 'GTiff'}</code></pre>
</div>
</div>
<p>Next, we can make a request to the <code>/stac/tilejson.json</code> endpoint to return a TileJSON document for the <code>"visual"</code> spatio-temporal asset. Note that we pass in <code>"visual"</code> as the value to the <code>"asset"</code> parameter and also set the min and max zoom levels from the metadata returned to us by the request to the <code>/stac/info</code> endpoint.</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>titiler_endpoint<span class="sc">}</span><span class="ss">/stac/tilejson.json"</span>,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    params <span class="op">=</span> {</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>: stac_item_url,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"assets"</span>: <span class="st">"visual"</span>,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"minzoom"</span>: r[<span class="st">"visual"</span>][<span class="st">"minzoom"</span>], </span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"maxzoom"</span>: r[<span class="st">"visual"</span>][<span class="st">"maxzoom"</span>], </span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>).json()</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>r</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>{'tilejson': '2.2.0',
 'version': '1.0.0',
 'scheme': 'xyz',
 'tiles': ['https://titiler.xyz/stac/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fearth-search.aws.element84.com%2Fv0%2Fcollections%2Fsentinel-s2-l2a-cogs%2Fitems%2FS2B_50JNL_20191026_0_L2A&amp;assets=visual'],
 'minzoom': 8,
 'maxzoom': 14,
 'bounds': [116.99979944683326,
  -31.72323454687613,
  118.15866343531508,
  -30.727472475558006],
 'center': [117.57923144107417, -31.22535351121707, 8]}</code></pre>
</div>
</div>
<p>Finally, we can create an ipyleaflet <code>TileLayer</code> object which generates XYZ tiles from the <code>"visual"</code> asset from the Sentinel-2 STAC Item.</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a TileLayer to generate XYZ tiles using the tiles URL in the TileJSON document</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>aws_cog_tiles <span class="op">=</span> TileLayer(</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span>r[<span class="st">"tiles"</span>][<span class="dv">0</span>],</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"AWS Sentinel-2 COG"</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>bounds <span class="op">=</span> r[<span class="st">"bounds"</span>]</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Map object centred on the center property from a TileJSON document</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Note how we index into the center property to the TileJSON document</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(center<span class="op">=</span>((bounds[<span class="dv">1</span>] <span class="op">+</span> bounds[<span class="dv">3</span>]) <span class="op">/</span> <span class="dv">2</span>,(bounds[<span class="dv">0</span>] <span class="op">+</span> bounds[<span class="dv">2</span>]) <span class="op">/</span> <span class="dv">2</span>), zoom<span class="op">=</span>r[<span class="st">"center"</span>][<span class="dv">2</span>])</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the XYZ TileLayer to the Map</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>m.add_layer(aws_cog_tiles)</span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"184b297ecda8426fab36f413768e4382","version_major":2,"version_minor":0}
</script>
</div>
</div>
<p>Above, we generated XYZ tiles from the <code>"visual"</code> asset. This asset is already pre-formatted for rendering as RGB or true colour images. However, there might be cases when we need to visualise data that is stored in separate assets (e.g to generate a false colour composite image where near infrared reflectance is mapped to shades of red on the display).</p>
<p>To do this we’ll need to i) generate XYZ tile images from data stored in different assets (i.e.&nbsp;different COG files), and ii) rescale the data from the pixel values to numbers between 0 and 255 (i.e.&nbsp;byte data). The Sentinel-2 data captured for each of the spectral wavebands is stored in the asset’s named <code>B02</code> for visible blue, <code>B03</code> for visible green, and so on. This is spectral reflectance data but stored as <code>uint16</code> <code>dtype</code> and scaled by 10000 (i.e.&nbsp;reflectance of 0.86 is stored as pixel values of 8600).</p>
<p>We want to map the range of our display’s colour values (0 - 255) to the range of pixel values to maximise contrast and highlight patterns in the image. To do this we need information about the distribution of pixel values in each asset so we can select sensible minimum and maximum pixel values to rescale to 0 and 255. TiTiler has a <code>/stac/statistics</code> endpoint that returns a dictionary object of image statistics for each asset in a STAC Item.</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>titiler_endpoint<span class="sc">}</span><span class="ss">/stac/statistics"</span>,</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    params <span class="op">=</span> {</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>: stac_item_url,</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>).json()</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>r.keys()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>dict_keys(['overview_b1', 'overview_b2', 'overview_b3', 'visual_b1', 'visual_b2', 'visual_b3', 'B01_b1', 'B02_b1', 'B03_b1', 'B04_b1', 'B05_b1', 'B06_b1', 'B07_b1', 'B08_b1', 'B8A_b1', 'B09_b1', 'B11_b1', 'B12_b1', 'AOT_b1', 'WVP_b1', 'SCL_b1'])</code></pre>
</div>
</div>
<p>Print the image statistics for <code>B03_b1</code> - visible green reflectance.</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>r[<span class="st">"B03_b1"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>{'min': 6.0,
 'max': 8779.0,
 'mean': 1533.72759572875,
 'count': 1048405.0,
 'sum': 1607967680.0,
 'std': 394.3382549775902,
 'median': 1494.0,
 'majority': 1437.0,
 'minority': 6.0,
 'unique': 4828.0,
 'histogram': [[31112.0,
   803734.0,
   201766.0,
   9474.0,
   948.0,
   527.0,
   417.0,
   239.0,
   122.0,
   66.0],
  [6.0,
   883.3,
   1760.6,
   2637.8999999999996,
   3515.2,
   4392.5,
   5269.799999999999,
   6147.099999999999,
   7024.4,
   7901.7,
   8779.0]],
 'valid_percent': 99.98,
 'masked_pixels': 171.0,
 'valid_pixels': 1048405.0,
 'percentile_2': 815.0,
 'percentile_98': 2464.0}</code></pre>
</div>
</div>
<section id="recap-quiz-6" class="level4">
<h4 class="anchored" data-anchor-id="recap-quiz-6">Recap quiz</h4>
<p><strong>Can you make a request to TiTiler’s <code>/stac/tilejson.json</code> endpoint to get a TileJSON document with information required to generate XYZ tiles from red, green, and blue bands of the Sentinel-2 STAC Item? Then, add this layer to an ipyleaflet <code>Map</code> object.</strong></p>
<p><strong>You will need to pass the following dictionary object into the <code>params</code> argument of the <code>requests</code> <code>get()</code> method.</strong></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"url"</span>: stac_item_url,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"assets"</span>: [<span class="st">"B04"</span>, <span class="st">"B03"</span>, <span class="st">"B02"</span>],</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"rescale"</span>: <span class="st">"0,2000"</span>,</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"minzoom"</span>: <span class="dv">8</span>, </span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"maxzoom"</span>: <span class="dv">14</span>, </span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Note that we are mapping pixel values of 0 to image display values of 0 and pixel values of 2000 to image display values of 255. We also specify which STAC Item assets we wish to use as a list object.</strong></p>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">## ADD CODE HERE ##</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<details>
<summary>
<b>answer</b>
</summary>
<div class="sourceCode" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>titiler_endpoint<span class="sc">}</span><span class="ss">/stac/tilejson.json"</span>,</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>    params <span class="op">=</span> {</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>: stac_item_url,</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"assets"</span>: [<span class="st">"B04"</span>, <span class="st">"B03"</span>, <span class="st">"B02"</span>],</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"rescale"</span>: <span class="st">"0,2000"</span>,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"minzoom"</span>: <span class="dv">8</span>, </span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"maxzoom"</span>: <span class="dv">14</span>, </span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>).json()</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a TileLayer to generate XYZ tiles using the tiles URL in the TileJSON document</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>aws_cog_tiles <span class="op">=</span> TileLayer(</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span>r[<span class="st">"tiles"</span>][<span class="dv">0</span>],</span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"AWS Sentinel-2 COG"</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>bounds <span class="op">=</span> r[<span class="st">"bounds"</span>]</span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Map object centred on the center property from a TileJSON document</span></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Note how we index into the center property to the TileJSON document</span></span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(center<span class="op">=</span>((bounds[<span class="dv">1</span>] <span class="op">+</span> bounds[<span class="dv">3</span>]) <span class="op">/</span> <span class="dv">2</span>,(bounds[<span class="dv">0</span>] <span class="op">+</span> bounds[<span class="dv">2</span>]) <span class="op">/</span> <span class="dv">2</span>), zoom<span class="op">=</span>r[<span class="st">"center"</span>][<span class="dv">2</span>])</span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the XYZ TileLayer to the Map</span></span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>m.add_layer(aws_cog_tiles)</span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>We can also pass in an expression in a request to the <code>/stac/tilejson.json</code> endpoint which can generate output XYZ tiles from mathematical combinations of the assets in a STAC Item. Below is an example of computing NDVI to display on XYZ tiles.</p>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>titiler_endpoint<span class="sc">}</span><span class="ss">/stac/tilejson.json"</span>,</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    params <span class="op">=</span> {</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"url"</span>: stac_item_url,</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"expression"</span>: <span class="st">"(B08_b1-B04_b1)/(B08_b1+B04_b1)"</span>,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"rescale"</span>: <span class="st">"-0.5,0.5"</span>,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"minzoom"</span>: <span class="dv">8</span>, </span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"maxzoom"</span>: <span class="dv">14</span>, </span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"colormap_name"</span>: <span class="st">"viridis"</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>).json()</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>r</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>{'tilejson': '2.2.0',
 'version': '1.0.0',
 'scheme': 'xyz',
 'tiles': ['https://titiler.xyz/stac/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fearth-search.aws.element84.com%2Fv0%2Fcollections%2Fsentinel-s2-l2a-cogs%2Fitems%2FS2B_50JNL_20191026_0_L2A&amp;expression=%28B08_b1-B04_b1%29%2F%28B08_b1%2BB04_b1%29&amp;rescale=-0.5%2C0.5&amp;colormap_name=viridis'],
 'minzoom': 8,
 'maxzoom': 14,
 'bounds': [116.99979944683326,
  -31.72323454687613,
  118.15866343531508,
  -30.727472475558006],
 'center': [117.57923144107417, -31.22535351121707, 8]}</code></pre>
</div>
</div>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a TileLayer to generate XYZ tiles using the tiles URL in the TileJSON document</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>aws_cog_tiles <span class="op">=</span> TileLayer(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span>r[<span class="st">"tiles"</span>][<span class="dv">0</span>],</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    attribution<span class="op">=</span><span class="st">"AWS Sentinel-2 COG"</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>bounds <span class="op">=</span> r[<span class="st">"bounds"</span>]</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Map object centred on the center property from a TileJSON document</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Note how we index into the center property to the TileJSON document</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> Map(center<span class="op">=</span>((bounds[<span class="dv">1</span>] <span class="op">+</span> bounds[<span class="dv">3</span>]) <span class="op">/</span> <span class="dv">2</span>,(bounds[<span class="dv">0</span>] <span class="op">+</span> bounds[<span class="dv">2</span>]) <span class="op">/</span> <span class="dv">2</span>), zoom<span class="op">=</span>r[<span class="st">"center"</span>][<span class="dv">2</span>])</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the XYZ TileLayer to the Map</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>m.add_layer(aws_cog_tiles)</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"db43aae8ed4b43df98c5facdcd98e90a","version_major":2,"version_minor":0}
</script>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lab-6-practice-exercises.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Week 6 (practice)</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>